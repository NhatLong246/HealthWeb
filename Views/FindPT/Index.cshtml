@{
    ViewData["Title"] = "Tìm Kiếm Huấn Luyện Viên - HealthWeb";
    Layout = "_Layout";
}
@Html.AntiForgeryToken()

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="~/css/findpt/findpt.css">

<div class="find-pt-container">
    <div class="find-pt-header">
        <h1><i class="fas fa-dumbbell"></i> Tìm Kiếm Huấn Luyện Viên</h1>
        <p>Khám phá và kết nối với những huấn luyện viên chuyên nghiệp phù hợp với bạn</p>
    </div>

    <!-- Search and Filters Section -->
    <div class="search-filters-section">
        <div class="search-bar">
            <div class="search-input-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="Tìm kiếm theo tên, chuyên môn, kỹ năng...">
            </div>
            <button class="search-btn" onclick="searchPTs()">
                <i class="fas fa-search"></i> Tìm kiếm
            </button>
        </div>

        <div class="filters">
            <div class="filter-group">
                <label><i class="fas fa-map-marker-alt"></i> Thành phố</label>
                <select id="locationFilter">
                    <option value="">Tất cả</option>
                    <option value="Hà Nội">Hà Nội</option>
                    <option value="TP.HCM">TP.HCM</option>
                    <option value="Đà Nẵng">Đà Nẵng</option>
                    <option value="Hải Phòng">Hải Phòng</option>
                    <option value="Online">Online</option>
                </select>
            </div>

            <div class="filter-group">
                <label><i class="fas fa-dumbbell"></i> Chuyên môn</label>
                <select id="specializationFilter">
                    <option value="">Tất cả</option>
                    <option value="Weight Loss">Giảm cân</option>
                    <option value="Muscle Gain">Tăng cơ</option>
                    <option value="Yoga">Yoga</option>
                    <option value="Cardio">Cardio</option>
                    <option value="Pilates">Pilates</option>
                    <option value="Rehabilitation">Phục hồi</option>
                </select>
            </div>

            <div class="filter-group">
                <label><i class="fas fa-dollar-sign"></i> Giá tối đa/giờ</label>
                <input type="number" id="maxPriceFilter" placeholder="VD: 500000" min="0" step="10000">
            </div>

            <div class="filter-group">
                <label><i class="fas fa-star"></i> Kinh nghiệm tối thiểu</label>
                <input type="number" id="minExperienceFilter" placeholder="Số năm" min="0" step="1">
            </div>

            <button class="clear-filters-btn" onclick="clearFilters()">
                <i class="fas fa-times"></i> Xóa bộ lọc
            </button>
        </div>
    </div>

    <!-- Results Section -->
    <div class="results-section">
        <div class="results-header">
            <h2 id="resultsCount">Đang tải...</h2>
        </div>

        <div class="pt-cards-grid" id="ptCardsGrid">
            <!-- PT cards will be loaded here -->
        </div>

        <div class="empty-state" id="emptyState" style="display: none;">
            <i class="fas fa-search"></i>
            <p>Không tìm thấy huấn luyện viên nào phù hợp</p>
            <button onclick="clearFilters()" class="btn-primary">Xóa bộ lọc</button>
        </div>

        <div class="loading-state" id="loadingState">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Đang tải...</p>
        </div>
    </div>
</div>

<!-- PT Detail Modal -->
<div class="modal" id="ptDetailModal">
    <div class="modal-content">
        <span class="close" onclick="closePTDetailModal()">&times;</span>
        <div id="ptDetailContent">
            <!-- PT details will be loaded here -->
        </div>
    </div>
</div>

<!-- Request Training Modal -->
<div class="modal" id="requestModal">
    <div class="modal-content">
        <span class="close" onclick="closeRequestModal()">&times;</span>
        <h2><i class="fas fa-calendar-check"></i> Gửi Yêu Cầu Tập Luyện</h2>
        <form id="requestForm" onsubmit="submitRequest(event)">
            <input type="hidden" id="requestPtId">
            
            <div class="form-group">
                <label><i class="fas fa-calendar-alt"></i> Ngày và giờ tập</label>
                <input type="datetime-local" id="requestDateTime" required>
            </div>

            <div class="form-group">
                <label><i class="fas fa-video"></i> Loại buổi tập</label>
                <select id="requestSessionType" required>
                    <option value="Online">Online (Video call)</option>
                    <option value="In-person">Trực tiếp (In-person)</option>
                </select>
            </div>

            <div class="form-group">
                <label><i class="fas fa-sticky-note"></i> Ghi chú (tùy chọn)</label>
                <textarea id="requestNotes" rows="4" placeholder="Ví dụ: Tôi muốn tập trung vào giảm cân, có chấn thương đầu gối..."></textarea>
            </div>

            <div class="form-actions">
                <button type="button" class="btn-secondary" onclick="closeRequestModal()">Hủy</button>
                <button type="submit" class="btn-primary">
                    <i class="fas fa-paper-plane"></i> Gửi yêu cầu
                </button>
            </div>
        </form>
    </div>
</div>

<script src="~/js/findpt/findpt.js"></script>

