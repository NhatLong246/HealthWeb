<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ thống & bảo mật - WebHealthy</title>
    <!-- CSS Files -->
    <link rel="stylesheet" href="~/asset/css/admin.css" asp-append-version="true">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- JavaScript Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- JavaScript Files -->
    <script src="~/asset/js/heThongBaoMat.js" asp-append-version="true"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar will be loaded by sidebar.js -->
        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h1 id="page-title">Hệ thống & bảo mật</h1>
                <div class="header-actions">
                    <button class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="notifications-btn">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </button>
                    <div class="user-menu">
                        <i class="fas fa-user-circle"></i>
                    </div>
                </div>
            </header>

            <!-- System Management Section -->
            <section id="system" class="content-section active">
                <div class="section-header">
                    <h2>Quản lý hệ thống, file & bảo mật</h2>
                </div>

                <!-- System Tabs -->
                <div class="system-tabs">
                    <button class="tab-btn active" data-tab="settings">
                        <i class="fas fa-cog"></i> Cài đặt hệ thống
                    </button>
                    <button class="tab-btn" data-tab="files">
                        <i class="fas fa-folder-open"></i> Quản lý file
                    </button>
                    <button class="tab-btn" data-tab="security">
                        <i class="fas fa-shield-alt"></i> Bảo mật
                    </button>
                    <button class="tab-btn" data-tab="features">
                        <i class="fas fa-star"></i> Tính năng
                    </button>
                    <button class="tab-btn" data-tab="logs">
                        <i class="fas fa-file-alt"></i> Nhật ký
                    </button>
                </div>

                <div class="system-content">
                    <!-- System Settings Panel -->
                    <div class="system-panel" id="panel-settings">
                        <div class="system-panel-header">
                            <h3><i class="fas fa-cog"></i> Cài đặt hệ thống</h3>
                        </div>
                        <div class="system-panel-body">
                            <form id="system-settings-form">
                                <div class="form-grid-2">
                                    <div class="form-group">
                                        <label>Tên hệ thống <span class="required">*</span></label>
                                        <input type="text" id="system-name" class="form-input" value="WebHealthy" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Email hệ thống <span class="required">*</span></label>
                                        <input type="email" id="system-email" class="form-input" value="admin@webhealthy.com" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Trạng thái bảo trì</label>
                                    <label class="switch">
                                        <input type="checkbox" id="maintenance-mode">
                                        <span class="slider"></span>
                                    </label>
                                    <span class="form-hint">Khi bật, người dùng sẽ thấy thông báo bảo trì</span>
                                </div>
                                <div class="form-group">
                                    <label>Thông báo bảo trì</label>
                                    <textarea id="maintenance-message" class="form-input" rows="3" placeholder="Nhập thông báo hiển thị khi hệ thống bảo trì...">Hệ thống đang được bảo trì. Vui lòng quay lại sau.</textarea>
                                </div>
                                <div class="modal-actions">
                                    <button type="button" class="btn-cancel" onclick="resetSystemSettings()">Đặt lại</button>
                                    <button type="submit" class="btn-primary"><i class="fas fa-save"></i> Lưu cài đặt</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- File Management Panel -->
                    <div class="system-panel" id="panel-files" style="display: none;">
                        <div class="system-panel-header">
                            <h3><i class="fas fa-folder-open"></i> Quản lý file</h3>
                            <div class="header-actions-group">
                                <button class="btn-primary" id="btn-upload-file">
                                    <i class="fas fa-upload"></i> Tải lên file
                                </button>
                            </div>
                        </div>

                        <!-- File Filters -->
                        <div class="advanced-filter-bar-enhanced">
                            <div class="filter-section">
                                <div class="filter-section-header">
                                    <i class="fas fa-search"></i>
                                    <span>TÌM KIẾM</span>
                                </div>
                                <div class="filter-input-wrapper">
                                    <i class="fas fa-search filter-input-icon"></i>
                                    <input type="text" class="filter-input-enhanced" id="file-search" placeholder="Tên file, user...">
                                </div>
                            </div>
                            <div class="filter-section">
                                <div class="filter-section-header">
                                    <i class="fas fa-filter"></i>
                                    <span>LOẠI FILE</span>
                                </div>
                                <div class="filter-select-wrapper">
                                    <i class="fas fa-chevron-down filter-select-icon"></i>
                                    <select class="filter-select-enhanced" id="file-type-filter">
                                        <option value="">Tất cả</option>
                                        <option value="Image">Hình ảnh</option>
                                        <option value="PDF">PDF</option>
                                        <option value="Excel">Excel</option>
                                        <option value="Video">Video</option>
                                        <option value="Document">Tài liệu</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-section">
                                <div class="filter-section-header">
                                    <i class="fas fa-filter"></i>
                                    <span>MỤC ĐÍCH</span>
                                </div>
                                <div class="filter-select-wrapper">
                                    <i class="fas fa-chevron-down filter-select-icon"></i>
                                    <select class="filter-select-enhanced" id="file-purpose-filter">
                                        <option value="">Tất cả</option>
                                        <option value="AnhDaiDien">Ảnh đại diện</option>
                                        <option value="BaoCao">Báo cáo</option>
                                        <option value="ChungChi">Chứng chỉ</option>
                                        <option value="AnhBuaAn">Ảnh bữa ăn</option>
                                        <option value="VideoTap">Video tập</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions-enhanced">
                                <button class="btn-filter-reset" onclick="resetFileFilters()">
                                    <i class="fas fa-redo-alt"></i>
                                    <span>Đặt lại</span>
                                </button>
                            </div>
                        </div>

                        <!-- Files Table -->
                        <div class="table-container" id="files-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Mã</th>
                                        <th>Tên file</th>
                                        <th>User</th>
                                        <th>Loại</th>
                                        <th>Mục đích</th>
                                        <th>Kích thước</th>
                                        <th>Ngày upload</th>
                                        <th>Trạng thái</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="files-table-body"></tbody>
                            </table>
                        </div>
                        <div class="table-pagination" id="files-pagination"></div>
                    </div>

                    <!-- Security Panel -->
                    <div class="system-panel" id="panel-security" style="display: none;">
                        <div class="system-panel-header">
                            <h3><i class="fas fa-shield-alt"></i> Bảo mật hệ thống</h3>
                        </div>
                        <div class="system-panel-body">
                            <form id="security-settings-form">
                                <div class="security-settings">
                                    <div class="security-item">
                                        <div class="security-item-info">
                                            <h4><i class="fas fa-key"></i> Giới hạn số lần đăng nhập sai</h4>
                                            <p class="form-hint">Số lần đăng nhập sai tối đa trước khi khóa tài khoản</p>
                                        </div>
                                        <input type="number" id="max-login-attempts" class="form-input" value="5" min="3" max="10" style="width: 100px;">
                                    </div>
                                    <div class="security-item">
                                        <div class="security-item-info">
                                            <h4><i class="fas fa-clock"></i> Thời gian khóa tài khoản (phút)</h4>
                                            <p class="form-hint">Thời gian tài khoản bị khóa sau khi đăng nhập sai quá nhiều lần</p>
                                        </div>
                                        <input type="number" id="lockout-duration" class="form-input" value="30" min="5" max="1440" style="width: 100px;">
                                    </div>
                                    <div class="security-item">
                                        <div class="security-item-info">
                                            <h4><i class="fas fa-hourglass-half"></i> Thời gian hết hạn Reset Token (phút)</h4>
                                            <p class="form-hint">Thời gian token reset mật khẩu còn hiệu lực</p>
                                        </div>
                                        <input type="number" id="reset-token-expiry" class="form-input" value="30" min="15" max="120" style="width: 100px;">
                                    </div>
                                    <div class="security-item">
                                        <div class="security-item-info">
                                            <h4><i class="fas fa-lock"></i> Yêu cầu mật khẩu mạnh</h4>
                                            <p class="form-hint">Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ hoa, chữ thường, số và ký tự đặc biệt</p>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox" id="strong-password" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                                <div class="modal-actions">
                                    <button type="button" class="btn-cancel" onclick="resetSecuritySettings()">Đặt lại</button>
                                    <button type="submit" class="btn-primary"><i class="fas fa-save"></i> Lưu cài đặt bảo mật</button>
                                </div>
                            </form>

                            <!-- Reset Tokens Management -->
                            <div class="security-section-divider"></div>
                            <div class="system-panel-header">
                                <h4><i class="fas fa-key"></i> Quản lý Reset Tokens</h4>
                            </div>
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>UserID</th>
                                            <th>Username</th>
                                            <th>Token</th>
                                            <th>Ngày tạo</th>
                                            <th>Hết hạn</th>
                                            <th>Trạng thái</th>
                                            <th>Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody id="reset-tokens-table-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Features Panel -->
                    <div class="system-panel" id="panel-features" style="display: none;">
                        <div class="system-panel-header">
                            <h3><i class="fas fa-star"></i> Quản lý tính năng</h3>
                        </div>
                        <div class="system-panel-body">
                            <div class="table-container" id="features-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Mã</th>
                                            <th>Tên tính năng</th>
                                            <th>Mô tả</th>
                                            <th>Trạng thái</th>
                                            <th>Thao tác</th>
                                        </tr>
                                    </thead>
                                    <tbody id="features-table-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Logs Panel -->
                    <div class="system-panel" id="panel-logs" style="display: none;">
                        <div class="system-panel-header">
                            <h3><i class="fas fa-file-alt"></i> Nhật ký hệ thống</h3>
                            <div class="header-actions-group">
                                <button class="btn-primary" id="btn-export-logs">
                                    <i class="fas fa-download"></i> Xuất logs
                                </button>
                            </div>
                        </div>

                        <!-- Log Filters -->
                        <div class="advanced-filter-bar-enhanced">
                            <div class="filter-section">
                                <div class="filter-section-header">
                                    <i class="fas fa-search"></i>
                                    <span>TÌM KIẾM</span>
                                </div>
                                <div class="filter-input-wrapper">
                                    <i class="fas fa-search filter-input-icon"></i>
                                    <input type="text" class="filter-input-enhanced" id="log-search" placeholder="Nội dung log, UserID...">
                                </div>
                            </div>
                            <div class="filter-section">
                                <div class="filter-section-header">
                                    <i class="fas fa-filter"></i>
                                    <span>MỨC ĐỘ</span>
                                </div>
                                <div class="filter-select-wrapper">
                                    <i class="fas fa-chevron-down filter-select-icon"></i>
                                    <select class="filter-select-enhanced" id="log-level-filter">
                                        <option value="">Tất cả</option>
                                        <option value="Info">Info</option>
                                        <option value="Error">Error</option>
                                        <option value="Warning">Warning</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-section">
                                <div class="filter-section-header">
                                    <i class="fas fa-calendar"></i>
                                    <span>TỪ NGÀY</span>
                                </div>
                                <div class="filter-input-wrapper">
                                    <i class="fas fa-calendar filter-input-icon"></i>
                                    <input type="date" class="filter-input-enhanced" id="log-date-from">
                                </div>
                            </div>
                            <div class="filter-section">
                                <div class="filter-section-header">
                                    <i class="fas fa-calendar"></i>
                                    <span>ĐẾN NGÀY</span>
                                </div>
                                <div class="filter-input-wrapper">
                                    <i class="fas fa-calendar filter-input-icon"></i>
                                    <input type="date" class="filter-input-enhanced" id="log-date-to">
                                </div>
                            </div>
                            <div class="filter-actions-enhanced">
                                <button class="btn-filter-reset" onclick="resetLogFilters()">
                                    <i class="fas fa-redo-alt"></i>
                                    <span>Đặt lại</span>
                                </button>
                            </div>
                        </div>

                        <!-- Logs Container -->
                        <div class="logs-container" id="logs-container">
                            <div class="logs-table-wrapper">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Thời gian</th>
                                            <th>Mức độ</th>
                                            <th>UserID</th>
                                            <th>Nội dung</th>
                                        </tr>
                                    </thead>
                                    <tbody id="logs-table-body"></tbody>
                                </table>
                            </div>
                        </div>
                        <div class="table-pagination" id="logs-pagination"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="~/asset/js/sidebar.js" asp-append-version="true"></script>
    <script>
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof initializeSystem === 'function') {
                initializeSystem();
            }
        });
    </script>
</body>
</html>

