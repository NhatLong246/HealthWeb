:root {
    --radius: 14px;
}

/* Dark Mode Variables (Default) */
body.dark-mode {
    --bg: #1e293b;
    --card: rgba(30, 41, 59, 0.8);
    --text: #ffffff;
    --muted: #94a3b8;
    --primary: #4ade80;
    --success: #1fbf75;
    --warning: #ffcd3c;
    --danger: #ff5c5c;
    --shadow: 0 8px 24px rgba(0,0,0,.3);
    --border: rgba(78, 222, 128, 0.2);
    --hover-bg: rgba(78, 222, 128, 0.1);
}

/* Light Mode Variables */
body.light-mode {
    --bg: #fff5f5;
    --card: rgba(255, 255, 255, 0.9);
    --text: #7c2d12;
    --muted: #9a3412;
    --primary: #ea580c;
    --success: #16a34a;
    --warning: #f59e0b;
    --danger: #dc2626;
    --shadow: 0 8px 24px rgba(0,0,0,.1);
    --border: rgba(251, 146, 60, 0.4);
    --hover-bg: rgba(251, 146, 60, 0.1);
}

* {
    box-sizing: border-box
}

body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* Kế hoạch tập luyện container */
.khtl {
    background: transparent;
    color: var(--text);
}

/* Scoped overrides: ensure only elements inside the Kế hoạch tập luyện app use these common class styles */
.khtl .card { 
    background: var(--card); 
    border-radius: var(--radius); 
    box-shadow: var(--shadow); 
    padding: 16px;
    border: 1px solid var(--border);
    transition: all 0.3s ease;
}

.khtl .btn { 
    border: 0; 
    border-radius: 16px; 
    padding: 8px 14px; 
    cursor: pointer; 
    font-size: 14px; 
    display: inline-flex; 
    align-items: center; 
    justify-content: center;
    transition: all 0.3s ease;
}

.khtl .btn.primary { 
    background: var(--primary); 
    color: #fff;
}

body.dark-mode .khtl .btn.primary {
    background: #4ade80;
    color: #0f172a;
}

body.light-mode .khtl .btn.primary {
    background: #ea580c;
    color: #fff;
}

.khtl .btn.success { 
    background: var(--success); 
    color: #fff;
}

.khtl .btn.warning { 
    background: var(--warning);
}

body.dark-mode .khtl .btn.warning {
    color: #0f172a;
}

body.light-mode .khtl .btn.warning {
    color: #7c2d12;
}

.khtl .btn.danger { 
    background: var(--danger); 
    color: #fff;
}

.khtl .btn.ghost { 
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text);
}

.khtl .btn:hover { 
    transform: translateY(-1px); 
    box-shadow: 0 10px 18px rgba(0,0,0,.15);
    filter: brightness(1.1);
}

.khtl #view-schedule .footer, .khtl #view-detail .footer { 
    display: flex; 
    justify-content: center; 
    margin-top: 10px;
}

.khtl #view-detail .footer.sticky { 
    position: static; 
    left: auto; 
    bottom: auto; 
    transform: none; 
    z-index: 1; 
    background: transparent; 
    margin-top: 12px;
}

.khtl .badge { 
    min-width: 84px; 
    padding: 10px 12px; 
    border-radius: 12px; 
    text-align: center; 
    font-weight: 600;
    transition: all 0.3s ease;
}

body.dark-mode .khtl .badge {
    background: rgba(78, 222, 128, 0.15);
    color: #4ade80;
}

body.light-mode .khtl .badge {
    background: rgba(251, 146, 60, 0.15);
    color: #ea580c;
}

/* Center action button rows and prevent last button from floating right */
.khtl .actions { justify-content: center !important; align-items: center; flex-wrap: wrap; width: 100% }
.khtl .actions .right { margin-left: 0 !important }
.khtl #view-detail .actions { justify-content: center }

/* Center the "Bắt đầu bài tập" buttons inside each exercise card */
.khtl .exercise-item .open-btn { justify-self: center }

/* Dark-mode styles */
body.dark-mode .khtl .card,
body.dark-mode .khtl .exercise-item,
body.dark-mode .khtl .monthgrid .cell,
body.dark-mode .khtl .day,
body.dark-mode .khtl .warn,
body.dark-mode .khtl .pill,
body.dark-mode .khtl .fake-input,
body.dark-mode .khtl .history li { 
    color: #ffffff;
    background: rgba(30, 41, 59, 0.8);
}

/* Muted texts in dark mode */
body.dark-mode .khtl .range-label,
body.dark-mode .khtl .day span,
body.dark-mode .khtl .exercise-item p,
body.dark-mode .khtl .details-grid span,
body.dark-mode .khtl small,
body.dark-mode .khtl .cap { 
    color: #94a3b8;
}

/* Keep timer colors in dark mode */
body.dark-mode .khtl .timer { 
    background: #0f172a; 
    color: #4ade80;
    border: 1px solid rgba(78, 222, 128, 0.3);
}

/* Light-mode styles */
body.light-mode .khtl .card,
body.light-mode .khtl .exercise-item,
body.light-mode .khtl .monthgrid .cell,
body.light-mode .khtl .day,
body.light-mode .khtl .warn,
body.light-mode .khtl .pill,
body.light-mode .khtl .fake-input,
body.light-mode .khtl .history li { 
    color: #7c2d12;
    background: rgba(255, 255, 255, 0.9);
}

body.light-mode .khtl .range-label,
body.light-mode .khtl .day span,
body.light-mode .khtl .exercise-item p,
body.light-mode .khtl .details-grid span,
body.light-mode .khtl small,
body.light-mode .khtl .cap { 
    color: #9a3412;
}

body.light-mode .khtl .timer { 
    background: #fff5f5; 
    color: #ea580c;
    border: 1px solid rgba(251, 146, 60, 0.4);
}

.page-header {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 12px;
    margin: 24px 16px 8px
}

.page-header .icon-btn {
    flex-shrink: 0
}

.page-header h1 {
    margin: 0;
    font-size: 22px;
    color: var(--text);
}

.page-header .sub {
    margin: 6px 0 0;
    color: var(--muted);
    font-size: 12px
}

.icon-btn {
    border: 0;
    background: transparent;
    cursor: pointer;
    font-size: 18px;
    opacity: .8;
    color: var(--text);
    transition: opacity .2s ease, color .2s ease
}

body.dark-mode .icon-btn:hover {
    opacity: 1;
    color: #4ade80;
}

body.light-mode .icon-btn:hover {
    opacity: 1;
    color: #ea580c;
}

body.dark-mode .khtl .icon-btn {
    color: #ffffff;
    opacity: .9
}

body.dark-mode .khtl .icon-btn:hover {
    color: #4ade80;
    opacity: 1
}

body.light-mode .khtl .icon-btn {
    color: #7c2d12;
    opacity: .9
}

body.light-mode .khtl .icon-btn:hover {
    color: #ea580c;
    opacity: 1
}

    .icon-btn[disabled] {
        opacity: .2;
        cursor: default
    }

.view {
    display: none;
    max-width: 1100px;
    margin: 0 auto;
    padding: 8px 12px 88px;
    padding-top: 100px
}

    .view.active {
        display: block
    }

.grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin: 12px 0
}

    .grid-2 .card.end {
        display: flex;
        align-items: center;
        justify-content: flex-end
    }

.card {
    background: var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 16px;
    border: 1px solid var(--border);
    transition: transform .18s ease, box-shadow .22s ease, border-color .2s ease, background-color .2s ease
}

.card:hover {
    transform: translateY(-3px);
    box-shadow: 0 14px 28px rgba(0,0,0,.2);
    border-color: var(--primary);
}

body.dark-mode .card:hover {
    box-shadow: 0 14px 28px rgba(78, 222, 128, 0.2);
}

body.light-mode .card:hover {
    box-shadow: 0 14px 28px rgba(251, 146, 60, 0.2);
}
/* subtle card styles (no aggressive hover) */
.card-title {
    display: flex;
    align-items: center;
    justify-content: space-between
}

.tabs {
    display: flex;
    gap: 8px;
    margin: 10px 0 14px
}

.tab {
    border: 1px solid var(--border);
    background: var(--hover-bg);
    color: var(--text);
    padding: 8px 10px;
    border-radius: 24px;
    cursor: pointer;
    transition: all .25s ease
}

.tab:hover {
    transform: translateY(-1px);
    border-color: var(--primary);
}

body.dark-mode .tab:hover {
    box-shadow: 0 6px 14px rgba(78, 222, 128, 0.2);
}

body.light-mode .tab:hover {
    box-shadow: 0 6px 14px rgba(251, 146, 60, 0.2);
}

.tab.active {
    background: var(--primary);
    color: #fff;
    border-color: var(--primary)
}

body.dark-mode .tab.active {
    background: #4ade80;
    color: #0f172a;
}

body.light-mode .tab.active {
    background: #ea580c;
    color: #fff;
}
    /* focus ring for accessibility */
    .tab:focus-visible {
        outline: 0;
        box-shadow: 0 0 0 3px rgba(45,126,247,.25)
    }
/* remove extra underline animation */
.range-label {
    color: var(--muted);
    font-size: 12px;
    margin-bottom: 8px
}

.weekline {
    display: flex;
    gap: 8px
}

.day {
    flex: 1;
    min-width: 0;
    background: var(--hover-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 10px;
    text-align: center;
    transition: background-color .2s ease, border-color .2s ease, transform .15s ease;
    color: var(--text);
}

.day.now {
    outline: 2px solid var(--primary);
    background: var(--hover-bg);
}

.day.selected {
    outline: 2px solid var(--primary);
    background: var(--hover-bg);
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(0,0,0,.15);
}

body.dark-mode .day.selected {
    box-shadow: 0 4px 12px rgba(78, 222, 128, 0.3);
}

body.light-mode .day.selected {
    box-shadow: 0 4px 12px rgba(251, 146, 60, 0.3);
}

.day span {
    display: block;
    color: var(--muted);
    font-size: 12px
}

.day b {
    font-size: 16px;
    color: var(--text);
}

.day:hover {
    background: var(--hover-bg);
    border-color: var(--primary);
    transform: translateY(-1px)
}

/* Month grid */
.monthgrid {
    display: grid;
    grid-template-columns: repeat(7,1fr);
    gap: 8px
}

.monthgrid .cell {
    background: var(--hover-bg);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 12px;
    text-align: right;
    color: var(--text);
    min-height: 64px;
    transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease
}

.monthgrid .cell.today {
    outline: 2px solid var(--primary)
}

.monthgrid .cell.selected {
    border-color: var(--primary);
}

body.dark-mode .monthgrid .cell.selected {
    box-shadow: 0 8px 18px rgba(78, 222, 128, 0.3);
}

body.light-mode .monthgrid .cell.selected {
    box-shadow: 0 8px 18px rgba(251, 146, 60, 0.3);
}

.monthgrid .cell:hover {
    transform: translateY(-2px);
    border-color: var(--primary);
}

body.dark-mode .monthgrid .cell:hover {
    box-shadow: 0 10px 20px rgba(78, 222, 128, 0.2);
}

body.light-mode .monthgrid .cell:hover {
    box-shadow: 0 10px 20px rgba(251, 146, 60, 0.2);
}

    .monthgrid .head {
        grid-column: span 7;
        display: grid;
        grid-template-columns: repeat(7,1fr);
        gap: 8px;
        margin-bottom: 4px
    }

.monthgrid .dow {
    color: var(--muted);
    font-size: 12px;
    text-align: center;
    font-weight: 600
}

/* Year grid */
.yeargrid {
    display: grid;
    grid-template-columns: repeat(4,1fr);
    gap: 10px
}

.yeargrid .mon {
    background: var(--hover-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 18px;
    text-align: center;
    font-weight: 700;
    cursor: pointer;
    transition: transform .18s ease, box-shadow .22s ease;
    color: var(--text);
}

.yeargrid .mon:hover {
    transform: translateY(-3px);
    border-color: var(--primary);
}

body.dark-mode .yeargrid .mon:hover {
    box-shadow: 0 12px 24px rgba(78, 222, 128, 0.2);
}

body.light-mode .yeargrid .mon:hover {
    box-shadow: 0 12px 24px rgba(251, 146, 60, 0.2);
}

.details-grid {
    display: grid;
    grid-template-columns: repeat(4,1fr);
    gap: 10px
}

.details-grid div {
    background: var(--hover-bg);
    border: 1px dashed var(--border);
    border-radius: 12px;
    padding: 12px;
    text-align: center;
    color: var(--text);
}

.details-grid span {
    display: block;
    color: var(--muted);
    font-size: 12px
}

.details-grid strong {
    color: var(--text);
    font-size: 16px;
}

.exercise-list {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin-top: 8px
}

.exercise-item {
    display: grid;
    grid-template-columns: 1fr 220px;
    gap: 16px;
    align-items: center;
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 14px;
    background: var(--card);
    transition: transform .18s ease, box-shadow .22s ease, border-color .22s ease, background-color .2s ease
}

.exercise-item:hover {
    transform: translateY(-2px);
    border-color: var(--primary);
}

body.dark-mode .exercise-item:hover {
    box-shadow: 0 12px 24px rgba(78, 222, 128, 0.2);
    background: rgba(30, 41, 59, 0.9);
}

body.light-mode .exercise-item:hover {
    box-shadow: 0 12px 24px rgba(251, 146, 60, 0.2);
    background: rgba(255, 255, 255, 0.95);
}

    .exercise-item img {
        order: 2;
        width: 220px;
        height: 120px;
        object-fit: cover;
        border-radius: 10px;
        justify-self: end
    }

    .exercise-item img {
        transition: transform .3s ease
    }

    .exercise-item:hover img {
        transform: scale(1.04)
    }

.exercise-item h4 {
    margin: 0 0 6px;
    font-size: 15px;
    color: var(--text);
}

.exercise-item p {
    margin: 0;
    color: var(--muted);
    font-size: 12px
}

    .exercise-item .content {
        display: flex;
        flex-direction: column;
        gap: 6px;
        align-items: flex-start
    }

    .exercise-item .play {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff
    }

    .exercise-item .open-btn {
        grid-column: 1;
        align-self: start;
        margin-top: 8px;
        font-size: 13px;
        padding: 6px 10px;
        border-radius: 12px
    }
    /* make the start button shorter without changing text */
    .exercise-item .open-btn {
        font-size: 12px;
        padding: 10px 12px;
        max-width: 120px;
        white-space: normal;
        line-height: 1.2;
        text-align: center;
        word-break: break-word
    }

.actions {
    display: flex;
    gap: 10px;
    margin-top: 12px
}

    .actions.wrap {
        flex-wrap: wrap
    }

    .actions .right {
        margin-left: auto
    }

.btn {
    border: 0;
    border-radius: 16px;
    padding: 8px 14px;
    cursor: pointer;
    font-size: 14px
}

.actions.wrap .btn {
    min-width: 108px
}

.btn.primary {
    background: var(--primary);
    color: #fff
}

.btn.success {
    background: var(--success);
    color: #fff
}

.btn.warning {
    background: var(--warning);
    color: #663c00
}

.btn.danger {
    background: var(--danger);
    color: #fff
}

.btn.ghost {
    background: #fff;
    border: 1px solid #d7e3f8;
    color: #3a67b3
}

.btn.xl {
    padding: 14px 22px;
    font-size: 16px;
    font-weight: 600
}

.btn {
    transition: transform .15s ease, box-shadow .2s ease, filter .15s ease
}

    .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 18px rgba(0,0,0,.08);
        filter: brightness(1.05)
    }

    .btn.primary:hover {
        background: #2568e6
    }

    .btn.success:hover {
        background: #19ad69
    }

    .btn.warning:hover {
        background: #ffbf00;
        color: #5a3a00
    }

    .btn.danger:hover {
        background: #ff4545
    }

    .btn.ghost:hover {
        border-color: #b7c9f0;
        color: #1e49a3;
        background: #f8fbff
    }

    .btn.ripple {
        position: relative;
        overflow: hidden
    }

        .btn.ripple:after {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: inherit;
            transform: scale(0);
            background: radial-gradient(120px 120px at var(--x,50%) var(--y,50%),rgba(255,255,255,.45),transparent 40%);
            transition: transform .45s ease, opacity .6s ease;
            opacity: 0
        }

        .btn.ripple.active:after {
            transform: scale(1);
            opacity: 1
        }

    .btn.primary:hover {
        background: #1f6be0
    }

    .btn.success:hover {
        background: #17a964
    }

    .btn.warning:hover {
        background: #ffbf00;
        color: #5a3a00
    }

    .btn.ghost:hover {
        border-color: #b7c9f0;
        color: #1e49a3
    }
/* remove shine effect */
/* stronger transitions and active states */
.btn {
    transition: transform .15s ease, box-shadow .2s ease, filter .15s ease, background-color .2s ease, color .2s ease, border-color .2s ease
}

    .btn:active {
        transform: translateY(0) scale(.98)
    }

    .btn.primary:active {
        background: #1e5ed3
    }

    .btn.success:active {
        background: #14985d
    }

    .btn.warning:active {
        background: #f1b500
    }

    .btn.danger:active {
        background: #ee3d3d
    }

.footer {
    display: flex;
    justify-content: center;
    margin-top: 10px
}

    .footer.sticky {
        position: static;
        left: auto;
        bottom: auto;
        transform: none;
        z-index: 1;
        background: transparent;
        margin-top: 12px
    }
    /* footer button nudge */
    .footer .btn:hover {
        transform: translateY(-2px)
    }

.barchart {
    display: grid;
    grid-template-columns: repeat(4,1fr);
    gap: 18px;
    align-items: end;
    height: 180px;
    margin-top: 6px;
    padding: 10px 10px 36px
}

.bar {
    height: var(--h);
    border-radius: 10px;
    position: relative;
    animation: fill-up .9s ease;
    transition: all 0.3s ease;
}

body.dark-mode .bar {
    background: linear-gradient(180deg, rgba(78, 222, 128, 0.6), rgba(78, 222, 128, 0.8));
}

body.light-mode .bar {
    background: linear-gradient(180deg, rgba(251, 146, 60, 0.6), rgba(251, 146, 60, 0.8));
}
    /* bars keep basic animation only */
    .bar span {
        position: absolute;
        inset: auto 0 -22px 0;
        text-align: center;
        font-size: 12px;
        color: var(--muted);
        pointer-events: none
    }

@keyframes fill-up {
    from {
        height: 0
    }

    to {
        height: var(--h)
    }
}
/* bar hover accent */
.bar {
    transition: filter .2s ease
}

    .bar:hover {
        filter: brightness(1.08)
    }

/* Chart wrap with y-axis labels and grid lines */
.chart-wrap {
    position: relative
}

.ylabels {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 36px;
    width: 40px;
    margin: 0;
    padding: 0 0 0 6px;
    list-style: none;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    color: var(--muted);
    font-size: 12px
}

body.dark-mode .barchart {
    background: repeating-linear-gradient(to top, rgba(78, 222, 128, 0.1) 0, rgba(78, 222, 128, 0.1) 1px, transparent 1px, transparent 36px);
    padding-left: 56px;
}

body.light-mode .barchart {
    background: repeating-linear-gradient(to top, rgba(251, 146, 60, 0.1) 0, rgba(251, 146, 60, 0.1) 1px, transparent 1px, transparent 36px);
    padding-left: 56px;
}

.stats {
    display: flex;
    gap: 14px;
    flex-wrap: wrap
}

.stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px
}

.badge {
    min-width: 84px;
    padding: 10px 12px;
    border-radius: 12px;
    background: #eef6ff;
    text-align: center;
    font-weight: 600
}

body.dark-mode .badge.green {
    background: rgba(31, 191, 117, 0.2);
    color: #1fbf75
}

body.light-mode .badge.green {
    background: rgba(22, 163, 74, 0.2);
    color: #16a34a
}

body.dark-mode .badge.yellow {
    background: rgba(255, 205, 60, 0.2);
    color: #ffcd3c
}

body.light-mode .badge.yellow {
    background: rgba(245, 158, 11, 0.2);
    color: #f59e0b
}

body.dark-mode .badge.red {
    background: rgba(255, 92, 92, 0.2);
    color: #ff5c5c
}

body.light-mode .badge.red {
    background: rgba(220, 38, 38, 0.2);
    color: #dc2626
}

    .badge.green::before {
        content: "🔥";
        margin-right: 6px
    }

    .badge.yellow::before {
        content: "⭐";
        margin-right: 6px
    }

    .badge.red::before {
        content: "💪";
        margin-right: 6px
    }

.advice {
    margin-top: 10px;
    background: var(--hover-bg);
    border-radius: 12px;
    border: 1px dashed var(--border);
    padding: 12px;
    color: var(--text);
}

.advice h4 {
    color: var(--text);
    margin-bottom: 8px;
}

.advice p {
    color: var(--muted);
}

/* Small icon before section titles */
.title-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    margin-right: 6px;
    filter: drop-shadow(0 2px 2px rgba(0,0,0,.06))
}

/* Card titles */
.khtl .card h3 {
    color: var(--text);
    margin-bottom: 12px;
}

.khtl .card h4 {
    color: var(--text);
    margin-bottom: 8px;
}

.timer {
    font-size: 36px;
    font-weight: 700;
    letter-spacing: 2px;
    background: #0d1626;
    color: #e9f2ff;
    border-radius: 12px;
    text-align: center;
    padding: 18px;
    box-shadow: inset 0 0 0 1px #13233c,0 10px 24px rgba(2,12,32,.35)
}

.timer-wrap {
    position: relative;
    border-radius: 14px;
    overflow: hidden
}

    .timer-wrap.running {
        box-shadow: 0 0 0 0 rgba(45,126,247,.35);
        animation: pulseGlow 2s ease-out infinite
    }

    .timer-wrap .sweep {
        position: absolute;
        left: 50%;
        top: 10%;
        width: 1.5px;
        height: 80%;
        background: linear-gradient(#7fb3ff,transparent);
        transform-origin: bottom center;
        opacity: .28;
        pointer-events: none;
        transform: translateX(-50%)
    }
/* Ensure time text is above sweep */
.timer {
    position: relative;
    z-index: 1
}

@keyframes pulseGlow {
    0% {
        box-shadow: 0 0 0 0 rgba(45,126,247,.35)
    }

    70% {
        box-shadow: 0 0 0 14px rgba(45,126,247,0)
    }

    100% {
        box-shadow: 0 0 0 0 rgba(45,126,247,0)
    }
}

.pill-grid {
    display: grid;
    grid-template-columns: repeat(3,1fr);
    gap: 10px;
    margin: 8px 0 12px
}

.pill {
    background: var(--hover-bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 10px;
    text-align: center;
    color: var(--text);
    transition: all 0.3s ease;
}

body.dark-mode .pill.good {
    background: rgba(78, 222, 128, 0.15);
    color: #4ade80;
    border-color: rgba(78, 222, 128, 0.3);
}

body.light-mode .pill.good {
    background: rgba(251, 146, 60, 0.15);
    color: #ea580c;
    border-color: rgba(251, 146, 60, 0.3);
}

body.dark-mode .pill.hard {
    background: rgba(255, 92, 92, 0.15);
    color: #ff5c5c;
    border-color: rgba(255, 92, 92, 0.3);
}

body.light-mode .pill.hard {
    background: rgba(220, 38, 38, 0.15);
    color: #dc2626;
    border-color: rgba(220, 38, 38, 0.3);
}

.media img {
    width: 100%;
    max-height: 180px;
    object-fit: cover;
    border-radius: 12px
}

.media img {
    transition: transform .35s ease
}

    .media img:hover {
        transform: scale(1.03)
    }

.field {
    margin-top: 8px
}

    .field label {
    font-size: 12px;
    color: var(--muted);
    font-weight: 500;
}

.field p {
    color: var(--text);
    margin-top: 4px;
}

.fake-input {
    height: 38px;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: var(--card);
    display: flex;
    align-items: center;
    padding: 0 10px;
    color: var(--text);
    transition: all 0.3s ease;
}

.guide-box {
    display: flex;
    align-items: center;
    gap: 12px;
    border-radius: 12px;
    padding: 12px 14px;
    box-shadow: 0 8px 22px rgba(0,0,0,.15);
    transition: all 0.3s ease;
}

body.dark-mode .guide-box {
    background: linear-gradient(90deg, rgba(78, 222, 128, 0.2), rgba(78, 222, 128, 0.3));
    color: #4ade80;
    border: 1px solid rgba(78, 222, 128, 0.3);
}

body.light-mode .guide-box {
    background: linear-gradient(90deg, rgba(251, 146, 60, 0.2), rgba(251, 146, 60, 0.3));
    color: #ea580c;
    border: 1px solid rgba(251, 146, 60, 0.3);
}

.guide-step {
    width: 32px;
    height: 32px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    font-weight: 700;
    box-shadow: 0 2px 6px rgba(0,0,0,.2);
}

body.dark-mode .guide-step {
    background: #0f172a;
    color: #4ade80;
}

body.light-mode .guide-step {
    background: #fff;
    color: #ea580c;
}

.guide-text {
    font-weight: 600;
}

body.dark-mode .guide-text {
    color: #4ade80;
}

body.light-mode .guide-text {
    color: #ea580c;
}

.warn {
    margin-top: 12px;
    padding: 12px;
    border-radius: 12px;
    transition: all 0.3s ease;
}

body.dark-mode .warn {
    color: #ff5c5c;
    background: rgba(255, 92, 92, 0.15);
    border: 1px solid rgba(255, 92, 92, 0.3);
}

body.light-mode .warn {
    color: #dc2626;
    background: rgba(220, 38, 38, 0.15);
    border: 1px solid rgba(220, 38, 38, 0.3);
}

    .warn .ico {
        margin-left: 6px;
        margin-right: 6px
    }

.warn-list {
    margin: 6px 0 0 0;
    padding: 0 0 0 16px
}

    .warn-list li {
        list-style: none;
        position: relative;
        padding-left: 12px
    }

        .warn-list li::before {
            content: "";
            position: absolute;
            left: 0;
            top: 8px;
            width: 6px;
            height: 6px;
            background: #e2574c;
            border-radius: 50%
        }

/* Limit detail card height to avoid pushing below chart */
#detail-info {
    max-height: 520px;
    overflow: auto
}

    #detail-info::-webkit-scrollbar {
        width: 8px
    }

    #detail-info::-webkit-scrollbar-thumb {
        background: #cfe0ff;
        border-radius: 8px
    }

/* View transition */
.view {
    animation: fade-in .25s ease
}

@keyframes fade-in {
    from {
        opacity: 0;
        transform: translateY(6px)
    }

    to {
        opacity: 1;
        transform: none
    }
}

@media (prefers-reduced-motion: reduce) {
    * {
        animation: none !important;
        transition: none !important
    }
}

/* Sparkline and history */
.spark {
    width: 100%;
    height: 120px;
    display: block;
    background: linear-gradient(180deg,#f7fbff,#fff);
    border: 1px solid #e6f0ff;
    border-radius: 12px
}

.history {
    margin: 10px 0 0;
    padding: 0;
    list-style: none
}

.history li {
    display: flex;
    justify-content: space-between;
    background: var(--hover-bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 8px 10px;
    margin-top: 6px;
    color: var(--text);
    transition: all 0.3s ease;
}

.history li:hover {
    border-color: var(--primary);
}

body.dark-mode .history li:hover {
    background: rgba(78, 222, 128, 0.1);
}

body.light-mode .history li:hover {
    background: rgba(251, 146, 60, 0.1);
}

    .history.small li {
        font-size: 12px
    }

/* Metric cards like image 2 */
.metrics {
    display: grid;
    grid-template-columns: repeat(3,1fr);
    gap: 8px;
    margin: 6px 0 10px
}

.metric {
    border-radius: 14px;
    padding: 10px;
    text-align: center;
    font-weight: 600;
    box-shadow: var(--shadow);
    transition: transform .2s ease
}

    .metric:hover {
        transform: translateY(-3px)
    }

    .metric.soft-yellow:hover {
        box-shadow: 0 12px 22px rgba(255,205,60,.18)
    }

    .metric.soft-red:hover {
        box-shadow: 0 12px 22px rgba(255,92,92,.18)
    }

    .metric.soft-blue:hover {
        box-shadow: 0 12px 22px rgba(45,126,247,.18)
    }

    .metric.soft-green:hover {
        box-shadow: 0 12px 22px rgba(31,191,117,.18)
    }

    .metric.soft-purple:hover {
        box-shadow: 0 12px 22px rgba(122,59,181,.18)
    }

    .metric.soft-violet:hover {
        box-shadow: 0 12px 22px rgba(110,86,191,.18)
    }

    .metric .ico {
        font-size: 18px;
        margin-bottom: 4px;
        opacity: .9
    }

    /* Subtle float for advice/history items */
    /* remove extra hover on history */

    /* Parallax container for image */
    /* remove parallax base */
    .metric .num {
        font-size: 18px;
        margin-bottom: 2px;
        font-weight: 700
    }

    .metric .cap {
        opacity: .8;
        font-size: 11px;
        line-height: 1.25
    }

body.dark-mode .soft-yellow {
    background: rgba(255, 205, 60, 0.15);
    color: #ffcd3c;
}

body.light-mode .soft-yellow {
    background: rgba(245, 158, 11, 0.15);
    color: #f59e0b;
}

body.dark-mode .soft-red {
    background: rgba(255, 92, 92, 0.15);
    color: #ff5c5c;
}

body.light-mode .soft-red {
    background: rgba(220, 38, 38, 0.15);
    color: #dc2626;
}

body.dark-mode .soft-blue {
    background: rgba(78, 222, 128, 0.15);
    color: #4ade80;
}

body.light-mode .soft-blue {
    background: rgba(251, 146, 60, 0.15);
    color: #ea580c;
}

body.dark-mode .soft-green {
    background: rgba(31, 191, 117, 0.15);
    color: #1fbf75;
}

body.light-mode .soft-green {
    background: rgba(22, 163, 74, 0.15);
    color: #16a34a;
}

body.dark-mode .soft-purple {
    background: rgba(139, 92, 246, 0.15);
    color: #a78bfa;
}

body.light-mode .soft-purple {
    background: rgba(168, 85, 247, 0.15);
    color: #a855f7;
}

body.dark-mode .soft-violet {
    background: rgba(124, 58, 237, 0.15);
    color: #a78bfa;
}

body.light-mode .soft-violet {
    background: rgba(139, 92, 246, 0.15);
    color: #a855f7;
}

@media (max-width:900px) {
    .grid-2 {
        grid-template-columns: 1fr
    }

    .exercise-list {
        grid-template-columns: 1fr
    }

    .exercise-item {
        grid-template-columns: 1fr
    }

        .exercise-item img {
            order: initial;
            width: 100%;
            height: 160px;
            justify-self: stretch
        }
}
